<div class="container mt-5">
  <h3 class="text-center text-success fw-bold mb-4">Check Your Payment Status</h3>

  <div class="input-group mb-4 w-50 mx-auto">
    <input 
      type="email" 
      class="form-control shadow-sm" 
      placeholder="Enter your email"
      [(ngModel)]="email"
    />
    <button class="btn btn-primary shadow-sm" (click)="fetchPayments()">Check</button>
  </div>

  <div *ngIf="isLoading" class="text-center my-3">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div *ngIf="!isLoading && submitted && payments.length === 0" class="alert alert-warning text-center shadow-sm">
    No payment records found for "{{ email }}"
  </div>

  <div *ngIf="payments.length > 0" class="table-responsive shadow rounded mt-4">
    <table class="table table-striped align-middle text-center">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Method</th>
          <th>Transaction ID</th>
          <th>Sender</th>
          <th>Status</th>
          <th>Submitted At</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let payment of payments">
          <td>{{ payment.id }}</td>
          <td>{{ payment.method }}</td>
          <td>{{ payment.transactionId }}</td>
          <td>{{ payment.sender }}</td>
          <td>
            <span [ngClass]="{
              'badge bg-success': payment.status === 'APPROVED',
              'badge bg-warning text-dark': payment.status === 'PENDING',
              'badge bg-danger': payment.status === 'REJECTED'
            }">{{ payment.status }}</span>
          </td>
          <td>{{ payment.submittedAt | date:'short' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
